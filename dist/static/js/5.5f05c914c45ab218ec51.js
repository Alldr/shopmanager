webpackJsonp([5],{QuNk:function(e,t,n){"use strict";var r=/^(attrs|props|on|nativeOn|class|style|hook)$/;function o(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}var a={prop:{type:String},label:String,className:String,labelClassName:String,property:String,width:{},minWidth:{},renderHeader:Function,sortable:{type:[String,Boolean],default:!1},sortMethod:Function,resizable:{type:Boolean,default:!0},context:{},columnKey:String,align:String,headerAlign:String,showTooltipWhenOverflow:Boolean,showOverflowTooltip:Boolean,fixed:[Boolean,String],formatter:Function,selectable:Function,reserveSelection:Boolean,filterMethod:Function,filteredValue:Array,filters:Array,filterMultiple:{type:Boolean,default:!0},treeKey:{type:String,default:"id"},childNumKey:{type:String,default:"child_num"},parentKey:{type:String,default:"parent_id"},levelKey:{type:String,default:"depth"},childKey:{type:String,default:"children"},fileIcon:{type:String,default:"el-icon-file"},folderIcon:{type:String,default:"el-icon-folder"},remote:{type:Function,default:null},allRemote:{type:Boolean,default:!1},indentSize:{type:Number,default:14},expandAll:{type:Boolean,default:!1},expandKey:{type:String,default:"expanded"}};function i(e,t){return parseInt(t.row[e.props.levelKey])*parseInt(e.props.indentSize.toString())+"px"}function s(e,t){var n=t.store.states._treeRowLoading,r=e.props.treeKey,o=t.row;return n.map(function(e){return e[r]}).filter(function(e){return e==o[r]}).length>0}function l(e,t){var n=t.store.states._treeRowExpanded,r=e.props.treeKey,o=t.row;return n.map(function(e){return e[r]}).filter(function(e){return e==o[r]}).length>0}function c(e,t,n){return t.data.scopedSlots&&t.data.scopedSlots.default?t.data.scopedSlots.default(n):t.props.formatter?e("span",null,[t.props.formatter(n.row,n.column)]):e("span",null,[n.row[t.props.prop]])}var d=function(e){return JSON.parse(JSON.stringify(e))},p=function(e,t){for(var n=-1,r=0;r<t.length;r++)if(t[r]==e){n=r;break}return n},u=function(e,t,n){var r=e.props.treeKey,o=t.store.states;o._treeCachedExpanded=o._treeCachedExpanded.filter(function(e){return e[r]!=t.row[r]}),n?o._treeRowExpanded=o._treeRowExpanded.filter(function(e){return e[r]!=t.row[r]}):o._treeRowExpanded.push(t.row)},f=function(e,t,n){var r=e.props.treeKey;n?t.store.states._treeRowLoading=t.store.states._treeRowLoading.filter(function(e){return e[r]!=t.row[r]}):t.store.states._treeRowLoading.push(t.row)},h=function(e,t,n){var r=t.store.table;t.store.states;r.store.commit("setData",n)},g=function(e,t,n){var r=-1,o=e.props.treeKey;return n.forEach(function(e,n){e[o]==t.row[o]&&(r=n)}),r},m=function(e,t,n){var r=e.props,o=r.parentKey,a=r.treeKey,i=t.store.states,s=function(e,t,n,r){for(var o=[],a=[e],i=-1;i!=a.length;)i=a.length,t.forEach(function(e){p(e[n],a)>-1&&-1==p(e[r],a)&&(o.push(e[r]),a.push(e[r]))});return o}(t.row[a],n,o,a);n=n.filter(function(e){return!s.some(function(t){return t==e[a]})});var l=i._treeRowExpanded.filter(function(e){return s.some(function(t){return t==e[a]})}),c=i._treeCachedExpanded;l.forEach(function(e){c.some(function(t){return t[a]==e[a]})||i._treeCachedExpanded.push(e)}),i._treeRowExpanded=i._treeRowExpanded.filter(function(e){return!s.some(function(t){return t==e[a]})}),h(0,t,n)},v=function(e,t,n,r){void 0===r&&(r=!1);for(var o=d(t.store.states._data),a=g(e,t,o),i=o.slice(0,a+1),s=0;s<a+1;)o.shift(),s++;return r&&(i[a][e.props.childKey]=n),o=i.concat(n).concat(o)},y=function(e,t,n){var r=e.props,o=(r.treeKey,r.remote);f(e,t,!1);h(0,t,n),o(t.row,function(n){var r,o=e.props.childNumKey;if(f(e,t,!0),n&&n.length>0){var a=!e.props.allRemote;r=v(e,t,n,a)}else(r=d(t.store.states._data))[g(e,t,r)][o]=0;h(0,t,r)})},_=function(e,t,n){var r=e.props.childKey;n=v(e,t,t.row[r]),h(0,t,n)};function w(e,t){var n=d(t.store.states._data),r=e.props.childKey;if(!s(e,t)){var o=l(e,t);if(u(e,t,o),o)return m(e,t,n);var a=e.props,i=a.remote,c=a.allRemote;return i&&c?y(e,t,n):t.row[r]?_(e,t,n):i?y(e,t,n):void _(e,t,n)}}var b=new(function(){function e(){this.Injected={}}return e.prototype.isInjected=function(e){return this.Injected[e.store.table.tableId]},e.prototype.Inject=function(e){this.isInjected(e)||(this.Injected[e.store.table.tableId]=!0,e.store.states._treeRowExpanded=[],e.store.states._treeRowLoading=[],e.store.states._treeCachedExpanded=[],e.store.states._treeInitedExpanded=[])},e}()),x=function(e,t,n){return function(e,t){if(e.props.expandAll&&!t.store.states._treeInitedExpanded.some(function(n){return n==t.row[e.props.treeKey]}))return t.store.states._treeInitedExpanded.push(t.row[e.props.treeKey]),!0;var n=e.props.expandKey,r=t.row;if(n&&r[n]&&!t.store.states._treeInitedExpanded.some(function(t){return t==r[e.props.treeKey]}))return t.store.states._treeInitedExpanded.push(t.row[e.props.treeKey]),!0;var o=function(e,t){var n=t.store.states._treeCachedExpanded,r=e.props.treeKey,o=t.row;return n.map(function(e){return e[r]}).filter(function(e){return e==o[r]}).length>0}(e,t);return o&&function(e,t){var n=t.store.states._treeCachedExpanded,r=e.props.treeKey,o=t.row;t.store.states._treeCachedExpanded=n.filter(function(e){return e[r]!=o[r]})}(e,t),o}(t,n)&&setTimeout(function(){w(t,n)},15),e("span",{on:{click:function(e){e.preventDefault(),w(t,n)}}},[e("span",{style:{paddingLeft:i(t,n)}},[e("i",{class:function(e,t){return s(t,e)?"el-icon-loading":l(t,e)?"el-icon-caret-bottom":"el-icon-caret-right"}(n,t)},[]),e("i",{class:function(e,t){var n=e.props.folderIcon,r=e.props.folderIcon+"-open";return l(e,t)?r:n}(t,n)},[])]),c(e,t,n)])},S=function(e,t,n){return b.Inject(n),function(e,t){var n=e.props,r=n.childNumKey,o=n.childKey,a=t.row;return void 0!=a[r]?a[r]>0:void 0!=a[o]&&a[o].length>0}(t,n)?x(e,t,n):function(e,t,n){return e("span",{style:{paddingLeft:i(t,n)}},[e("i",{class:t.props.fileIcon},[]),c(e,t,n)])}(e,t,n)},K={name:"el-table-tree-column",functional:!0,props:a,render:function(e,t){var n={};return Object.keys(t.props).map(function(e){n[e]=t.props[e]}),e("el-table-column",[{attrs:n},{scopedSlots:{default:function(n){return S(e,t,n)}}}].reduce(function(e,t){var n,a,i,s,l;for(i in t)if(n=e[i],a=t[i],n&&r.test(i))if("class"===i&&("string"==typeof n&&(l=n,e[i]=n={},n[l]=!0),"string"==typeof a&&(l=a,t[i]=a={},a[l]=!0)),"on"===i||"nativeOn"===i||"hook"===i)for(s in a)n[s]=o(n[s],a[s]);else if(Array.isArray(n))e[i]=n.concat(a);else if(Array.isArray(a))e[i]=[n].concat(a);else for(s in a)n[s]=a[s];else e[i]=t[i];return e},{}),[])}};"undefined"!=typeof window&&window.Vue&&window.Vue.component("el-table-tree-column",K),e.exports=K},Xrem:function(e,t){},sms9:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("Xxa5"),o=n.n(r),a=n("exGp"),i=n.n(a),s=n("QuNk"),l={components:{ElTreeGrid:n.n(s).a},data:function(){return{loading:!1,goodsData:[],pagenum:1,pagesize:10,total:-1,options:[],selectedOptions:[],dialogFormVisibleRole:!1,form:{cat_name:"",cat_pid:-1,cat_level:-1},defaultProps:{value:"cat_id",label:"cat_name",children:"children"},formLabelWidth:"100px"}},created:function(){this.getGoodsCate()},methods:{addCate:function(){var e=this;return i()(o.a.mark(function t(){var n,r,a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return 0===e.selectedOptions.length&&(e.form.cat_pid=0,e.form.cat_level=0),1===e.selectedOptions.length&&(e.form.cat_pid=e.selectedOptions[0],e.form.cat_level=1),2===e.selectedOptions.length&&(e.form.cat_pid=e.selectedOptions[1],e.form.cat_level=2),t.next=5,e.$http.post("categories",e.form);case 5:n=t.sent,r=n.data.meta,a=r.msg,201===r.status&&(e.$message.success(a),e.getGoodsCate(),e.dialogFormVisibleRole=!1);case 8:case"end":return t.stop()}},t,e)}))()},handleChange:function(){},showAddCate:function(){this.dialogFormVisibleRole=!0,this.getCate(),this.selectedOptions=[],this.cat_name=""},getCate:function(){var e=this;return i()(o.a.mark(function t(){var n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("categories?type=2");case 2:n=t.sent,e.options=n.data.data;case 4:case"end":return t.stop()}},t,e)}))()},getGoodsCate:function(){var e=this;return i()(o.a.mark(function t(){var n,r,a,i,s,l;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.$http.get("categories?query="+e.query+"&pagesize="+e.pagesize+"&pagenum="+e.pagenum);case 3:n=t.sent,r=n.data,a=r.data,i=a.total,s=a.result,l=r.meta,l.status,l.msg,e.loading=!1,e.goodsData=s,e.total=i;case 8:case"end":return t.stop()}},t,e)}))()},handleSizeChange:function(e){this.pagenum=1,this.pagesize=e,this.getGoodsCate()},handleCurrentChange:function(e){this.pagenum=e,this.getGoodsCate()}}},c={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-card",{staticClass:"card"},[n("my-bread",{attrs:{level1:"商品管理",level2:"商品分类"}}),e._v(" "),n("el-button",{staticClass:"btn",attrs:{type:"primary",plain:""},on:{click:function(t){e.showAddCate()}}},[e._v("添加分类")]),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"table",staticStyle:{width:"100%"},attrs:{data:e.goodsData,height:"500"}},[n("el-tree-grid",{attrs:{"file-icon":"icon icon-file","folder-icon":"icon icon-folder",prop:"cat_name",width:"180",label:"分类名称",treeKey:"cat_id",parentKey:"cat_pid",levelKey:"cat_level",childKey:"children"}}),e._v(" "),n("el-table-column",{attrs:{label:"级别",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.cat_level?n("span",[e._v("一级")]):1===t.row.cat_level?n("span",[e._v("二级")]):2===t.row.cat_level?n("span",[e._v("三级")]):e._e()]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"goods_weight",label:"是否有效",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.cat_deleted?n("span",[e._v("有效")]):t.row.cat_deleted===e.ture?n("span"):e._e()]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"primary",size:"mini",plain:"",icon:"el-icon-edit",circle:""}}),e._v(" "),n("el-button",{attrs:{type:"primary",size:"mini",plain:"",icon:"el-icon-delete",circle:""},on:{click:function(n){e.delGoods(t.row)}}})]}}])})],1),e._v(" "),n("el-pagination",{attrs:{"current-page":e.pagenum,"page-sizes":[5,10,15,20],"page-size":5,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),n("el-dialog",{attrs:{title:"添加分类",visible:e.dialogFormVisibleRole},on:{"update:visible":function(t){e.dialogFormVisibleRole=t}}},[n("el-form",{attrs:{model:e.form,"label-position":"left"}},[n("el-form-item",{attrs:{label:"分类名称","label-width":e.formLabelWidth}},[n("el-input",{model:{value:e.form.cat_name,callback:function(t){e.$set(e.form,"cat_name",t)},expression:"form.cat_name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"分类","label-width":e.formLabelWidth}},[n("el-cascader",{attrs:{"expand-trigger":"hover",clearable:"","change-on-select":"",options:e.options,props:e.defaultProps},on:{change:e.handleChange},model:{value:e.selectedOptions,callback:function(t){e.selectedOptions=t},expression:"selectedOptions"}})],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogFormVisibleRole=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addCate()}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var d=n("VU/8")(l,c,!1,function(e){n("Xrem")},"data-v-6da7080c",null);t.default=d.exports}});
//# sourceMappingURL=5.5f05c914c45ab218ec51.js.map