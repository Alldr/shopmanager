webpackJsonp([9],{aemQ:function(t,e){},zRDr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Xxa5"),s=a.n(n),r=a("exGp"),l=a.n(r),i={data:function(){return{active:"1",form:{},options:[],selectedOptions:[],defaultProps:{value:"cat_id",label:"cat_name",children:"children"},manyData:[],onlyData:[],dynamicTags:[],inputVisible:!1,inputValue:""}},created:function(){this.getParamsData()},methods:{handleInputConfirm:function(t){var e=this;return l()(s.a.mark(function a(){var n,r,l,i;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return(n=e.inputValue)&&t.attr_vals.push(n),r={attr_name:t.attr_name,attr_sel:t.attr_sel,attr_vals:t.attr_vals.join(",")},a.next=5,e.$http.put("categories/"+e.selectedOptions[2]+"/attributes/"+t.attr_id,r);case 5:l=a.sent,i=l.data.meta.msg,e.$message.success(i),e.getManyData(),e.inputVisible=!1,e.inputValue="";case 11:case"end":return a.stop()}},a,e)}))()},showInput:function(){var t=this;this.inputVisible=!0,this.$nextTick(function(e){t.$refs.saveTagInput.$refs.input.focus()})},handleClose:function(t,e){var a=this;return l()(s.a.mark(function n(){var r,l,i;return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.attr_vals.splice(t.attr_vals.indexOf(e),1),r={attr_name:t.attr_name,attr_sel:t.attr_sel,attr_vals:t.attr_vals.join(",")},n.next=4,a.$http.put("categories/"+a.selectedOptions[2]+"/attributes/"+t.attr_id,r);case 4:l=n.sent,i=l.data.meta.msg,a.$message.success(i),a.getManyData();case 8:case"end":return n.stop()}},n,a)}))()},changeTab:function(){3===this.selectedOptions.length&&"1"===this.active&&this.getManyData(),3===this.selectedOptions.length&&"2"===this.active&&this.getOnlyData()},handleChange:function(){3===this.selectedOptions.length&&"1"===this.active&&this.getManyData()},getManyData:function(){var t=this;return l()(s.a.mark(function e(){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("categories/"+t.selectedOptions[2]+"/attributes?sel=many");case 2:a=e.sent,t.manyData=a.data.data,t.manyData.forEach(function(t){t.attr_vals=0===t.attr_vals.trim().length?[]:t.attr_vals.trim().split(",")});case 5:case"end":return e.stop()}},e,t)}))()},getParamsData:function(){var t=this;return l()(s.a.mark(function e(){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("categories");case 2:a=e.sent,t.options=a.data.data;case 4:case"end":return e.stop()}},e,t)}))()},getOnlyData:function(){var t=this;return l()(s.a.mark(function e(){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("categories/"+t.selectedOptions[2]+"/attributes?sel=only");case 2:a=e.sent,t.onlyData=a.data.data;case 4:case"end":return e.stop()}},e,t)}))()}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",{staticClass:"card"},[a("my-bread",{attrs:{level1:"商品管理",level2:"分类参数"}}),t._v(" "),a("el-row",{staticClass:"row"},[a("el-col",[a("el-alert",{attrs:{title:"注意:只允许为三级分类设置参数",type:"warning",closable:!1,left:"","show-icon":""}})],1)],1),t._v(" "),a("el-form",{attrs:{"label-position":"left",model:t.form}},[a("el-form-item",{attrs:{label:"请选择商品分类"}},[a("el-cascader",{attrs:{"expand-trigger":"hover",clearable:"",options:t.options,props:t.defaultProps,"show-all-levels":!1},on:{change:t.handleChange},model:{value:t.selectedOptions,callback:function(e){t.selectedOptions=e},expression:"selectedOptions"}})],1)],1),t._v(" "),a("el-tabs",{attrs:{type:"border-card",tabPosition:"top"},on:{"tab-click":function(e){t.changeTab()}},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("el-tab-pane",{attrs:{name:"1",label:"动态参数"}},[a("el-button",{attrs:{type:"primary",disabled:0===t.selectedOptions.length,plain:""}},[t._v("设置动态参数")]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.manyData,height:"300"}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._l(e.row.attr_vals,function(n,s){return a("el-tag",{key:s,attrs:{closable:"","disable-transitions":!1},on:{close:function(a){t.handleClose(e.row,n)}}},[t._v(t._s(n))])}),t._v(" "),t.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:function(a){t.handleInputConfirm(e.row)}},nativeOn:{keyup:function(a){if(!("button"in a)&&t._k(a.keyCode,"enter",13,a.key,"Enter"))return null;t.handleInputConfirm(e.row)}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:t.showInput}},[t._v("+ New Tag")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"#",type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"属性名称",prop:"attr_name"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",plain:"",type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(a){t.showUser(e.row)}}}),t._v(" "),a("el-button",{attrs:{size:"mini",plain:"",type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(a){t.delUser(e.row)}}})]}}])})],1)],1),t._v(" "),a("el-tab-pane",{attrs:{name:"2",label:"静态参数"}},[a("el-button",{attrs:{type:"primary",disabled:0===t.selectedOptions.length,plain:""}},[t._v("设置静态参数")]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.onlyData,height:"300"}},[a("el-table-column",{attrs:{label:"#",type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"属性名称",prop:"attr_name"}}),t._v(" "),a("el-table-column",{attrs:{label:"属性值",prop:"attr_vals"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",plain:"",type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(a){t.showUser(e.row)}}}),t._v(" "),a("el-button",{attrs:{size:"mini",plain:"",type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(a){t.delUser(e.row)}}})]}}])})],1)],1)],1)],1)},staticRenderFns:[]};var c=a("VU/8")(i,o,!1,function(t){a("aemQ")},"data-v-25a1deec",null);e.default=c.exports}});
//# sourceMappingURL=9.7022c9dc6a314b1e5359.js.map